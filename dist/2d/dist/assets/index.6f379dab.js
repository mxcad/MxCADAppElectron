import{bK as ce,aA as re,bL as X,bM as de,az as me,bN as pe,bF as ve,L as _e,bO as Y,bP as Z,bQ as he,d as Ce,r as ee,m as fe,bo as te,c as z,w as k,u as a,i as ge,o as u,a as n,A as r,X as se,a2 as d,bz as h,z as R,t as q,F as le,y as ye,S as ne,T as D,h as xe,bR as be,b as C,aG as ke,k as A,V as Le,p as we,j as Ee,_ as De}from"./index.d60773c7.js";import{u as Ae,M as Se}from"./index.4bc1f7b9.js";import{c as Fe}from"./math.58b544d2.js";import{V as Me}from"./VTable.5f7c8aac.js";const ue=ce(),{add:Te,remove:ie,putCurrent:ae,toggle:Ne,setValue:L,setIndex:x,getIndex:oe,stringifyJSON:Ve,create:mt,initLayerList:Be,setLayerList:ze}=ue,{index:i,list:v,currentLayer:Re,rootId:G}=re(ue),$e=m=>{const f=X("Shift"),w=X("Control"),c=()=>Array.isArray(i.value)&&i.value.length>1,j=(t,e,...s)=>{const[l,I,W]=s;if(f.value||w.value)return t.preventDefault();if(!e.isSelect)return L(l,I,W);if(c())return t.stopPropagation(),L(l,I),!1;L(l,I,W)};let _;const S=(t,e)=>{if(e&&e.target&&M(e.target),f.value){typeof _>"u"&&(_=i.value);const s=Math.max(_,t);x(Fe(s===t?_:t,s));return}if(w.value){let s=[];if(Array.isArray(i.value)){const l=i.value.indexOf(t);l>=0&&i.value.length>1?(s=[...i.value],s.splice(l,1)):s=[...i.value,t]}else s=[i.value,t];x(s);return}x(t),_=t,E()},O=(t,e)=>{(!c()||!v.value[t].isSelect)&&S(t,e)};let g;const E=()=>{Array.isArray(i.value)?g=i.value[i.value.length-1]:g=i.value},F=()=>{Te(),f&&(_=v.value.length-1)};let y;const M=t=>{if(t)if(t.tagName==="INPUT")y=t;else{let s=t?.getElementsByTagName("input")[0];s?y=s:M(t.parentNode)}},T=t=>{const e=oe();if(Array.isArray(e)&&e.length>1)return;const s=Array.isArray(e)?e[0]:e;Re.value!==v.value[s]&&v.value[s].id!==G.value&&t&&setTimeout(()=>{t.focus(),t.select()})},K=(t,e)=>{y=t.target,i.value===e&&T(y)},U=()=>{g&&x(g),g=void 0},J=()=>{x(v.value.map((t,e)=>e))},Q=()=>{E(),x([])},N=()=>{const t=Array.isArray(i.value)?i.value:[i.value];let e=[];E(),Ne("isSelect",v.value.map((s,l)=>(t.includes(l)||e.push(l),l))),i.value=e},b=de({hasIcon:!0,iconType:"svg-icon",menuList:[{label:"\u7F6E\u4E3A\u5F53\u524D",fn:()=>ae(),disabled:c},{label:"\u65B0\u5EFA\u56FE\u5C42",fn:()=>F()},{label:"\u5220\u9664",fn:()=>ie(),disabled:()=>{if(c())return!1;let t=oe(i.value);return t=typeof t=="number"?t:t[0],v.value[t]?.id===G.value},icon:Y("youjianshanchu")},{label:"\u91CD\u547D\u540D",tips:"F2",fn:()=>T(y),disabled:c,icon:Y("youjianzhongmingming")},{line:!0},{label:"\u5168\u90E8\u9009\u62E9",fn:()=>J()},{label:"\u5168\u90E8\u6E05\u9664",fn:()=>Q()},{label:"\u53CD\u8F6C\u9009\u62E9",fn:()=>N()}]}),{createColor:V}=me(),B=t=>{Z("Mx_Color",{call:(e,s)=>{L("color",V({...he(e,s)}),i)},color:t})};pe();const H=t=>{Z("Mx_Linetype",{call:()=>e=>{L("lineType",e,i)},lineTypeInfo:t})};let p=!1;const o=ve([{name:"\u65B0\u589E\u56FE\u5C42",fun:()=>{F(),_e(()=>{m?.value?.scrollTo({top:m.value.scrollHeight-m.value.clientHeight,behavior:"smooth"})})}},{name:"\u5220\u9664\u56FE\u5C42",fun:()=>ie()},{name:"\u7F6E\u4E3A\u5F53\u524D",fun:()=>ae()},{name:"\u5173\u95ED\u6240\u6709\u56FE\u5C42",fun:()=>{L("visible",p,v.value.map((t,e)=>e)),p=!p,o[3].name=p?"\u5F00\u542F\u6240\u6709\u56FE\u5C42":"\u5173\u95ED\u6240\u6709\u56FE\u5C42"}}]);return{onClickLayer:S,onClickStopTD:j,onClickLayerName:K,resumeIndex:U,reverseSelection:N,selectColor:B,selectLineType:H,setIndex:x,onRightClickLayer:O,initLayerList:Be,setLayerList:()=>{ze(Ve())},list:v,bodyRightClickMenuOptions:b,isShiftKeyMultipleChoice:f,isCtrlKeyMultipleChoice:w,boxRef:m,btnList:o,rootId:G}},$=m=>(we("data-v-6f3d7804"),m=m(),Ee(),m),je={class:"d-flex align-center my-2"},Oe=$(()=>n("thead",{class:"w-100"},[n("tr",{class:"w-100"},[n("th",{class:"w-20"},[n("div",{style:{width:"10px"},class:"d-inline-block"}),A(),n("span",null," \u56FE\u5C42\u540D\u79F0")]),n("th",{class:""},"\u53EF\u89C1"),n("th",{class:""},"\u51BB\u7ED3"),n("th",{class:""},"\u9501\u5B9A"),n("th",{class:""},"\u6253\u5370"),n("th",{class:"w-20"},"\u989C\u8272"),n("th",{class:"w-20"},"\u7EBF\u6027")])],-1)),Ke={class:"w-100",ref:"tbody"},Ue=["id","onClick","onContextmenu"],He={class:"text-no-wrap"},Pe={style:{width:"18px"},class:"d-inline-block"},Ie={class:"d-inline-block"},qe=["disabled","onClick","onUpdate:modelValue"],Ge=["onClick"],Je=["onClick"],Qe=["onClick"],We=["onClick"],Xe=["onClick"],Ye=["onClick"],Ze={class:"w-100 my-3",cellpadding:"20"},et={class:"w-100"},tt={class:"w-100"},st=$(()=>n("th",{class:"w-20"},null,-1)),lt={class:"w-auto px-6"},nt=$(()=>n("th",{class:"w-50"},null,-1)),it={class:"d-flex justify-end w-auto"},at=$(()=>n("div",{class:"mt-1"},null,-1)),ot=Ce({__name:"index",setup(m){const f=ee(),{onClickLayer:w,onClickStopTD:c,onClickLayerName:j,resumeIndex:_,reverseSelection:S,selectColor:O,selectLineType:g,setIndex:E,onRightClickLayer:F,initLayerList:y,setLayerList:M,list:T,bodyRightClickMenuOptions:K,btnList:U,isShiftKeyMultipleChoice:J,isCtrlKeyMultipleChoice:Q,rootId:N}=$e(f),{isShow:b,showDialog:V}=Ae(!1,"MxLayerManager");fe(b,p=>{p&&y()});const B=ee([]),H=p=>{const{map:o}=p(B.value,(P,t)=>t);o.length>0&&E(o)};return(p,o)=>{const P=te("box-selection"),t=te("right-click-menu");return u(),z(Se,{maxWidth:"800",ref:"layerDialog",modelValue:a(b),"onUpdate:modelValue":o[4]||(o[4]=e=>ge(b)?b.value=e:null),title:"\u56FE\u5C42\u7279\u6027\u7BA1\u7406\u5668"},{actions:k(()=>[at]),default:k(()=>[n("div",je,[(u(!0),r(le,null,se(a(U),(e,s)=>d((u(),z(R,{onClick:e.fun,ripple:!1,class:"mx-2 px-2 bg-undertint-bg",variant:"text",key:e.name+s,textContent:q(e.name)},null,8,["onClick","textContent"])),[[h,void 0,void 0,{center:!0}]])),128))]),d((u(),z(Me,{class:"w-100 layer-table",height:"300",ref_key:"boxRef",ref:f,onClick:o[0]||(o[0]=e=>a(_)())},{default:k(()=>[Oe,n("tbody",Ke,[(u(!0),r(le,null,se(a(T),(e,s)=>(u(),r("tr",{class:ye(["text-center layer-info",e.isSelect?"active":""]),ref_for:!0,ref_key:"refItems",ref:B,key:e.id,id:e.id.toString(),onClick:ne(l=>a(w)(s),["prevent"]),onContextmenu:ne(l=>a(F)(s,l),["prevent"])},[d((u(),r("td",He,[n("div",Pe,[e.status?(u(),z(D,{key:0,icon:"mdi:mdi-check",size:"x-small",color:"#16FD21"})):xe("v-if",!0)]),n("label",Ie,[d(n("input",{disabled:e.id===a(N),class:"text-truncate text-center",type:"text",onClick:l=>a(j)(l,s),"onUpdate:modelValue":l=>e.name=l},null,8,qe),[[be,e.name]])])])),[[h]]),d((u(),r("td",{class:"text-orange",onClick:l=>a(c)(l,e,"visible",!e.visible,s)},[C(D,{icon:e.visible?"yanjing1":"yanjing"},null,8,["icon"])],8,Ge)),[[h,void 0,void 0,{prevent:!0}]]),d((u(),r("td",{class:"text-orange",onClick:l=>a(c)(l,e,"freeze",!e.freeze,s)},[C(D,{icon:e.freeze?"ziyuan":"taiyang"},null,8,["icon"])],8,Je)),[[h]]),d((u(),r("td",{class:"text-orange",onClick:l=>a(c)(l,e,"lock",!e.lock,s)},[C(D,{icon:e.lock?"suo":"jiesuo1"},null,8,["icon"])],8,Qe)),[[h]]),d((u(),r("td",{onClick:l=>a(c)(l,e,"print",!e.print,s)},[C(D,{icon:e.print?"dayin":"budayinbiaoqian",size:"x-small"},null,8,["icon"])],8,We)),[[h]]),d((u(),r("td",{class:"d-flex align-center justify-center",onClick:l=>a(O)(e.color)},[n("div",{class:"colorBox mr-2",style:ke({background:`${e.color.color}`})},null,4),n("span",null,q(e.color.name),1)],8,Xe)),[[h]]),d((u(),r("td",{class:"w-20 text-truncate",onClick:l=>a(g)(e.lineType)},[A(q(e.lineType.name),1)],8,Ye)),[[h]])],42,Ue))),128))],512)]),_:1})),[[P,H],[t,a(K)]]),C(Le,{color:"#576375",class:"border-opacity-75"}),n("table",Ze,[n("thead",et,[n("tr",tt,[st,n("th",lt,[C(R,{class:"bg-undertint-bg","min-width":"76",onClick:o[1]||(o[1]=e=>a(S)())},{default:k(()=>[A("\u53CD\u9009")]),_:1})]),nt,n("th",it,[C(R,{class:"bg-light-blue-darken-1","min-width":"76",onClick:o[2]||(o[2]=e=>(a(M)(),a(V)(!1)))},{default:k(()=>[A("\u786E\u5B9A")]),_:1}),C(R,{class:"ml-10 mr-6 bg-undertint-bg","min-width":"76",onClick:o[3]||(o[3]=e=>a(V)())},{default:k(()=>[A("\u5173\u95ED")]),_:1})])])])])]),_:1},8,["modelValue"])}}});const pt=De(ot,[["__scopeId","data-v-6f3d7804"],["__file","D:/web/MxCADOnline/Sample/Edit/MxCADAppVuetify3/src/view/Dialogs/LayerManagementDialog/index.vue"]]);export{pt as default};
