import{r as x,aB as oe,H as E,m as te,c1 as ne,c2 as O,u as e,L as le,d as ie,bo as de,A as W,b as t,w as l,i as X,F as Y,o as H,a as b,t as L,k as r,a2 as me,c as Q,X as ce,ax as re,bE as ve,y as Fe,aw as pe,a5 as $,h as ue,f as M,p as fe,j as ge,_ as xe}from"./index.6232fea1.js";import{u as Z,M as ee,a as S,b as T}from"./index.07272584.js";import{M as J}from"./MxFieldset.69bd0b66.js";import{u as ae}from"./popup.dc8e951f.js";import{V as P}from"./VRow.f69baf5b.js";import{V as U}from"./VCol.d94e1801.js";import{V as ye}from"./VCheckbox.e4a4b6af.js";const _e=(u,a)=>{const d=E(()=>u.value[a.value]&&u.value[a.value].typeFace===""),N=x(["AMDTSymbols.shx","Aaa.shx","AcadEref.shx","CDM_HC.SHK","Cdm. shx","GEHIS0.SHX","GEHLTSHP.SH","GEHPRESE.SHX","IS0.SHX","simp1.shx"]),v=x(["\u4EFF\u5B8B","\u5B8B\u4F53","\u5FAE\u8F6F\u96C5\u9ED1","\u5FAE\u8F6F\u96C5\u9ED1Light","\u65B0\u5B8B\u4F53","\u6977\u4F53","\u7B49\u7EBF","\u7B49\u7EBFLight","\u9ED1\u4F53"]),n=x(["gbcbig.shx","hitxt.shx","hztxt.shx-del","intecad.shx","spec_bar.shx","sec_sl.shx","special.shx","whgdtxt.shx","whgtxt.shx","whtgtxt.shx","whtmtxt.shx","hz.shx","wlc-c.shx"]),y=x(["\u5E38\u89C4"]),F=E(()=>d.value?N.value:v.value),m=E(()=>d.value?n.value:y.value),D=(_=a.value)=>N.value.find(B=>{u.value[_].fileName}),h=(_=a.value)=>m.value.find(B=>{u.value[_].bigFontFileName});let p,f;return{fontNames:F,fontStyles:m,isBigFont:d,getFontName:D,getFontStyle:h,checkIsBigFont:()=>{if(d.value){const _=v.value.find(B=>u.value[a.value].fileName===B);!_&&!p&&(p=u.value[a.value].fileName+""),u.value[a.value].fileName=u.value[a.value].typeFace=_||v.value[0],f||(f=u.value[a.value].bigFontFileName+""),u.value[a.value].bigFontFileName=y.value[0]}else u.value[a.value].typeFace="",p?(u.value[a.value].fileName=p+"",p=void 0):u.value[a.value].fileName=D()||F.value[0],f?(u.value[a.value].bigFontFileName=f+"",f=void 0):u.value[a.value].bigFontFileName=h()||m.value[0]},emptyOldFont:()=>{p=void 0,f=void 0}}},Se=u=>{const a=x({bigFontFileName:"",fileName:"",id:-1,name:"",obliquingAngle:0,textSize:0,typeFace:"",xScale:0}),d=x(!1);return te(u,(n,y)=>{y.length!==0&&(d.value=!0)},{deep:!0}),{current:a,isUpdate:d,initCurrent:n=>{n=n||O().GetCurrentlyTextStyleName();const y=u.value.find(F=>F.name===n)||u.value[0];a.value=y},closeUpdate:()=>{le(()=>{d.value=!1})}}},be=()=>{const u=x([]),a=x(0),{fontNames:d,fontStyles:N,isBigFont:v,checkIsBigFont:n,emptyOldFont:y}=_e(u,a),{current:F,isUpdate:m,initCurrent:D,closeUpdate:h}=Se(u),p=g=>{function c(G){return Number(G.toFixed(4))}let{obliquingAngle:i,textSize:w,xScale:V,...q}=g;return i&&(i=c(i)),w&&(w=c(w)),V&&(V=c(V)),{bigFontFileName:"gbcbig.shx",fileName:"AMDTSymbols.shx",id:-1,name:"",obliquingAngle:i||0,textSize:w||0,typeFace:"",xScale:V||0,...q}},f=()=>{const g=O().GetTextStyleTable();u.value=JSON.parse(g.getJson()).map(c=>p(c))},k=()=>ne(()=>{f(),D(),a.value=u.value.indexOf(F.value)});oe(()=>{k()});const A=()=>{O().SetCurrentlyTextStyle(F.value.name);const g=O().GetTextStyleTable(),c=JSON.stringify(e(u));g.setJson(c)},_=g=>{const{open:c}=ae(),i=()=>{a.value=g,y()};return m.value?c({text:`\u5F53\u524D\u9009\u4E2D\u6837\u5F0F\u5DF2\u88AB\u4FEE\u6539
\u662F\u5426\u4FDD\u5B58?`,cancelTitle:"\u5426",defineTitle:"\u662F",define:()=>{A(),i(),h()},cancel:()=>{f(),i(),h()}}):i()},B=()=>{F.value=u.value[a.value]};let z=0;const C=x("\u6837\u5F0F1");return{list:u,current:F,index:a,fontNames:d,fontStyles:N,isBigFont:v,newStyleName:C,isUpdate:m,init:k,setIndex:_,putCurrent:B,add:()=>{u.value.push(p({name:C.value})),C.value="\u6837\u5F0F"+z++,a.value=u.value.length-1},remove:()=>{u.value.splice(a.value,1)},apply:A,checkIsBigFont:n}},R=u=>(fe("data-v-59f293a4"),u=u(),ge(),u),he={class:"px-3 mt-2"},Be={class:"h-100"},Ve=R(()=>b("div",{style:{width:"24px"}},[ue(' <v-icon icon="gou" color="red"></v-icon> ')],-1)),Ne={class:"h-100"},Ce={class:"w-50"},De={class:"w-50"},we=R(()=>b("span",{class:"mr-1"},"\u6837\u5F0F\u540D:",-1)),Ee={class:"ml-5"},ke=R(()=>b("div",{class:"pa-1"},null,-1)),Ae=ie({__name:"index",setup(u){const{isShow:a,showDialog:d}=Z(!1,"Mx_Style"),{list:N,current:v,index:n,fontNames:y,fontStyles:F,isBigFont:m,isUpdate:D,newStyleName:h,setIndex:p,putCurrent:f,add:k,remove:A,apply:_,checkIsBigFont:B}=be(),z=[{name:"\u5E94\u7528",fun:()=>{_()},disabled:()=>!D.value,primary:!0,labelProps:{"key-name":"A"}},{name:"\u5173\u95ED",fun:()=>d(!1)}],{isShow:C,showDialog:I}=Z(!1),{open:j}=ae(),g=x("\u6240\u6709\u6837\u5F0F"),c=E(()=>g.value==="\u6B63\u5728\u4F7F\u7528\u6837\u5F0F"),i=E(()=>c.value?[v.value]:N.value),w=E(()=>i.value[n.value]===v.value),V=x(!1),q=()=>{V.value=!0,le(()=>{V.value=!1})};te(c,()=>{n.value=i.value.indexOf(v.value)});const G=()=>{k(),I(!1),q()};return(Te,s)=>{const se=de("scroll-bottom");return H(),W(Y,null,[t(ee,{title:"\u6587\u5B57\u6837\u5F0F","max-width":"600",modelValue:e(a),"onUpdate:modelValue":s[9]||(s[9]=o=>X(a)?a.value=o:null),footerBtnList:z},{default:l(()=>[b("div",he,[b("p",null,"\u5F53\u524D\u6587\u5B57\u6837\u5F0F: "+L(e(v).name),1),t(P,{"align-stretch":""},{default:l(()=>[t(U,{cols:"4",class:"h-100","align-self":"start"},{default:l(()=>[b("div",Be,[t(S,{"key-name":"S",colon:""},{default:l(()=>[r("\u6837\u5F0F")]),_:1}),me((H(),Q(pe,{density:"compact",class:"overflow-y py-0 list-border",height:"230"},{default:l(()=>[(H(!0),W(Y,null,ce(e(i),(o,K)=>(H(),Q(re,{key:o.id,onClick:Ue=>e(p)(K),value:o,class:"pa-0","min-height":"24",height:"24"},{prepend:l(()=>[Ve]),default:l(()=>[t(ve,{textContent:L(o.name),class:Fe(["",e(n)===K?"bg-light-blue-darken-2":""])},null,8,["textContent","class"])]),_:2},1032,["onClick","value"]))),128))]),_:1})),[[se,V.value]]),t($,{"bg-color":"grey-lighten-2",class:"mt-2",modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=o=>g.value=o),items:["\u6240\u6709\u6837\u5F0F","\u6B63\u5728\u4F7F\u7528\u6837\u5F0F"]},null,8,["modelValue"]),ue(` <div class="w-100 preview-box mt-1">
              \u9884\u89C8AaBb123
            </div> `)])]),_:1}),t(U,{cols:"6",class:"h-100"},{default:l(()=>[b("div",Ne,[t(J,{title:"\u5B57\u4F53",class:"mb-1"},{default:l(()=>[t(P,null,{default:l(()=>[b("div",Ce,[t(S,{"key-name":e(m)?"X":"B",class:"ml-1"},{default:l(()=>[r(L(e(m)?"SHX\u5B57\u4F53":"\u5B57\u4F53\u540D"),1)]),_:1},8,["key-name"]),t($,{"bg-color":"grey-lighten-2",class:"mx-1","menu-props":{maxHeight:"200px"},items:e(y),modelValue:e(i)[e(n)].fileName,"onUpdate:modelValue":s[1]||(s[1]=o=>e(i)[e(n)].fileName=o)},null,8,["items","modelValue"])]),b("div",De,[t(S,{"key-name":e(m)?"B":"Y",class:"ml-1"},{default:l(()=>[r(L(e(m)?"\u5927\u5B57\u4F53":"\u5B57\u4F53\u6837\u5F0F"),1)]),_:1},8,["key-name"]),t($,{"bg-color":"grey-lighten-2",class:"mx-1","menu-props":{maxHeight:"200px"},items:e(F),modelValue:e(i)[e(n)].bigFontFileName,"onUpdate:modelValue":s[2]||(s[2]=o=>e(i)[e(n)].bigFontFileName=o)},null,8,["items","modelValue"])])]),_:1}),t(ye,{class:"mt-2","model-value":e(m),"onUpdate:modelValue":s[3]||(s[3]=o=>e(B)())},{label:l(()=>[t(S,{"key-name":"U",colon:""},{default:l(()=>[r("\u4F7F\u7528\u5927\u5B57\u4F53")]),_:1})]),_:1},8,["model-value"])]),_:1}),t(J,{title:"\u5927\u5C0F",class:"mt-4"},{default:l(()=>[t(M,{modelValue:e(i)[e(n)].textSize,"onUpdate:modelValue":s[4]||(s[4]=o=>e(i)[e(n)].textSize=o),type:"number",min:"0"},{prepend:l(()=>[t(S,{"key-name":"T"},{default:l(()=>[r("\u9AD8\u5EA6")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(J,{title:"\u6548\u679C",class:"mt-4"},{default:l(()=>[t(M,{modelValue:e(i)[e(n)].xScale,"onUpdate:modelValue":s[5]||(s[5]=o=>e(i)[e(n)].xScale=o),type:"number",step:"0.01"},{prepend:l(()=>[t(S,{"key-name":"W",colon:""},{default:l(()=>[r("\u5BBD\u5EA6\u56E0\u5B50")]),_:1})]),_:1},8,["modelValue"]),t(M,{class:"mt-2",modelValue:e(i)[e(n)].obliquingAngle,"onUpdate:modelValue":s[6]||(s[6]=o=>e(i)[e(n)].obliquingAngle=o),type:"number",step:"0.01"},{prepend:l(()=>[t(S,{"key-name":"O",colon:""},{default:l(()=>[r("\u503E\u659C\u89D2\u5EA6")]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1}),t(U,{cols:"2","align-self":"start"},{default:l(()=>[t(T,{class:"mt-5 w-100",isAction:""},{default:l(()=>[t(S,{"key-name":"C",onClick:e(f)},{default:l(()=>[r("\u7F6E\u4E3A\u5F53\u524D")]),_:1},8,["onClick"])]),_:1}),t(T,{class:"mt-4 w-100",isAction:""},{default:l(()=>[t(S,{"key-name":"N",onClick:s[7]||(s[7]=o=>e(I)())},{default:l(()=>[r("\u65B0\u5EFA")]),_:1})]),_:1}),t(T,{class:"mt-4 w-100",isAction:"",onClick:s[8]||(s[8]=o=>e(j)({text:"\u5220\u9664\u6587\u5B57\u6837\u5F0F: \u6837\u5F0F1?",define:()=>e(A)()})),disabled:e(w)},{default:l(()=>[t(S,{"key-name":"D"},{default:l(()=>[r("\u5220\u9664")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})])]),_:1},8,["modelValue"]),t(ee,{title:"\u65B0\u5EFA\u6587\u5B57\u6837\u5F0F",modelValue:e(C),"onUpdate:modelValue":s[13]||(s[13]=o=>X(C)?C.value=o:null),"max-width":"300"},{actions:l(()=>[ke]),default:l(()=>[t(P,{class:"py-3"},{default:l(()=>[t(U,{cols:"7","align-self":"start"},{default:l(()=>[t(M,{class:"mt-1 ml-8",modelValue:e(h),"onUpdate:modelValue":s[10]||(s[10]=o=>X(h)?h.value=o:null)},{prepend:l(()=>[we]),_:1},8,["modelValue"])]),_:1}),t(U,{cols:"5"},{default:l(()=>[b("div",Ee,[t(T,{primary:"",onClick:s[11]||(s[11]=o=>G()),isAction:""},{default:l(()=>[r(" \u786E\u5B9A ")]),_:1}),t(T,{class:"mt-2",onClick:s[12]||(s[12]=o=>e(I)()),isAction:""},{default:l(()=>[r(" \u53D6\u6D88 ")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});const Ge=xe(Ae,[["__scopeId","data-v-59f293a4"],["__file","D:/web/MxCADOnline/Sample/Edit/MxCADAppVuetify3/src/view/Dialogs/TextStyleDialog/index.vue"]]);export{Ge as default};
