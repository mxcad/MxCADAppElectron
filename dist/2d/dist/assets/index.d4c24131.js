import{l as I,r as C,m as V,n as N,q as z,s as R,v as O,d as Y,o as f,c as D,w as d,x as v,y as S,z as $,_ as B,A as _,F as L,k,a as x,t as E,h as A,B as F,C as U,D as j,E as W,G,I as H,H as J,J as K,K as Q,L as Z,N as X,O as T,b as p,P as ee,Q as te,R as ae,S as se,T as oe,U as ne,W as le,X as ie,Y as re}from"./index.6d6dbeea.js";class ce{items={};count=0;push(a){this.items[this.count++]=a}peek(){return this.items[this.count-1]}pop(){if(this.isEmpty())return;const a=this.items[--this.count];return delete this.items[this.count],a}isEmpty(){return this.count===0}size(){return this.count}clear(){this.items={},this.count=0}toString(){if(this.isEmpty())return"";let a=`${this.items[0]}`;for(let s=1;s<this.count;s++)a+=` ${this.items[s]}`;return a}}const ue=()=>new ce;function de(e,a){return typeof window.getComputedStyle<"u"?window.getComputedStyle(e,null)[a]:typeof e.currentStyle<"u"?e.currentStyle[a]:""}const fe=/^matrix3d\((?:[-\d.]+,\s*){12}([-\d.]+),\s*([-\d.]+)(?:,\s*[-\d.]+){2}\)/,me=/^matrix\((?:[-\d.]+,\s*){4}([-\d.]+),\s*([-\d.]+)\)$/,pe=(e,a)=>{let s=0,o=0;const c=()=>s,i=()=>o,l=e;l.style.position="absolute",l.style.transform="translate3d(0, 0, 1px)";const m=n=>{const t={clientX:0,clientY:0,targetX:0,targetY:0,distX:0,distY:0},h=de(l,"transform"),b=h.match(fe)||h.match(me);t.clientX=n.clientX,t.clientY=n.clientY,t.targetX=b[1],t.targetY=b[2],t.distX=t.clientX-t.targetX,t.distY=t.clientY-t.targetY;const g=n.pageX-l.offsetLeft,w=n.pageY-l.offsetTop,P=function(M){M.stopPropagation(),M.preventDefault(),s=M.clientX-t.distX,o=M.clientY-t.distY,Math.abs(o)>=Math.abs(t.clientY-w)&&(o>0?o=t.clientY-w:o=-(t.clientY-w)),Math.abs(s)>=Math.abs(t.clientX-g)&&(s>0?s=t.clientX-g:s=-(t.clientX-g)),l.style.transform=`translate3d(${s}px, ${o}px, 1px)`};document.onmousemove=P,document.onmouseup=function(){document.onmousemove=document.onmouseup=null}},r=a||e;return r.addEventListener("mousedown",m),{destroy:()=>{r.removeEventListener("mousedown",m)},getMoveX:c,getMoveY:i}},y=ue(),ke=(e=!1,a,s)=>{const{setCommandFocus:o}=I(),c=C(e);e&&(y.push(c),o(!1));const i=l=>{l===void 0?c.value=!c.value:O(l)&&(c.value=l)};return V(c,l=>{l?(y.push(c),o(!1)):(y.pop(),y.isEmpty()&&o(!1))}),a&&N(a,s||i),{isShow:c,showDialog:i}},q=()=>{y.isEmpty()||(y.peek().value=!1)};document.body.onkeydown=e=>{switch(e.keyCode){case 27:q();break}};const ge=()=>{let e;const a=C(),s=C();let o;const c=()=>{e=a.value?.contentEl,o&&o()};let i=()=>-423,l=()=>-370;const m=()=>i()===0?-370:i(),r=()=>l()===0?-360:l();return z(()=>{if(e=a.value?.contentEl,e){c();const{getMoveX:u,getMoveY:n,destroy:t}=pe(e,s.value?.$el);o=t,i=u,l=u}}),R(c),{dialog:a,dialogTitleEl:s,closeDialog:q,getMoveX:m,getMoveY:r}},ve=Y({__name:"MxDialogBtn",props:{primary:{type:Boolean,required:!1},isAction:{type:Boolean,required:!1}},setup(e){return(a,s)=>(f(),D($,{size:e.isAction?void 0:"x-small",class:S(["dialog-btn",e.primary?"bg-light-blue-darken-1":"bg-undertint-bg"]),"min-width":"76",variant:"text",rounded:"sm"},{default:d(()=>[v(a.$slots,"default",{},void 0,!0)]),_:3},8,["size","class"]))}});const ye=B(ve,[["__scopeId","data-v-422840a5"],["__file","D:/web/MxCADOnline/Sample/Edit/MxCADAppVuetify3/src/components/MxDialog/MxDialogBtn.vue"]]),he={key:1},xe=Y({__name:"MxLabel",props:{keyName:{type:String,required:!1},colon:{type:Boolean,required:!1},noTextCaption:{type:Boolean,required:!1}},setup(e){return(a,s)=>(f(),_("span",{class:S((e.noTextCaption,""))},[v(a.$slots,"default"),e.keyName?(f(),_(L,{key:0},[k("("),x("span",null,E(e.keyName),1),k(")")],64)):A("v-if",!0),e.colon?(f(),_("span",he,":")):A("v-if",!0)],2))}}),_e=B(xe,[["__file","D:/web/MxCADOnline/Sample/Edit/MxCADAppVuetify3/src/components/MxDialog/MxLabel.vue"]]);const be=F()({name:"VDialog",props:{fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...U({origin:"center center",scrollStrategy:"block",transition:{component:j},zIndex:2400})},emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:s}=a;const o=W(e,"modelValue"),{scopeId:c}=G(),i=C();function l(r){const u=r.relatedTarget,n=r.target;if(u!==n&&i.value?.contentEl&&i.value?.globalTop&&![document,i.value.contentEl].includes(n)&&!i.value.contentEl.contains(n)){const t=[...i.value.contentEl.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])')].filter(g=>!g.hasAttribute("disabled")&&!g.matches('[tabindex="-1"]'));if(!t.length)return;const h=t[0],b=t[t.length-1];u===h?b.focus():h.focus()}}H&&V(()=>o.value&&e.retainFocus,r=>{r?document.addEventListener("focusin",l):document.removeEventListener("focusin",l)},{immediate:!0}),V(o,async r=>{await Z(),r?i.value.contentEl?.focus({preventScroll:!0}):i.value.activatorEl?.focus({preventScroll:!0})});const m=J(()=>X({"aria-haspopup":"dialog","aria-expanded":String(o.value)},e.activatorProps));return K(()=>{const[r]=T.filterProps(e);return p(T,X({ref:i,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable}]},r,{modelValue:o.value,"onUpdate:modelValue":u=>o.value=u,"aria-modal":"true",activatorProps:m.value,role:"dialog"},c),{activator:s.activator,default:function(){for(var u=arguments.length,n=new Array(u),t=0;t<u;t++)n[t]=arguments[t];return p(ee,{root:!0},{default:()=>[s.default?.(...n)]})}})}),Q({},i)}}),Me={class:"d-flex justify-space-between align-center w-100 py-1"},De={class:"title_box"},Ee=["src"],Ce={class:"ml-2"},Se={key:1},we=Y({__name:"index",props:{title:{type:String,required:!1,default:"\u6807\u9898"},logo:{type:String,required:!1,default:()=>te()},cardClass:{type:String,required:!1,default:"bg-background box-shadow"},cardTextClass:{type:String,required:!1,default:"mx-1 px-2  bg-prominent rounded-t"},footerBtnList:{type:Array,required:!1,default:()=>[]},modelValue:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue"],setup(e,{expose:a,emit:s}){const{dialog:o,dialogTitleEl:c,getMoveX:i,getMoveY:l}=ge(),m=r=>{s("update:modelValue",!1)};return a({getMoveX:i,getMoveY:l}),(r,u)=>(f(),D(be,{ref_key:"dialog",ref:o,"model-value":e.modelValue,contained:"",persistent:"","no-click-animation":""},{default:d(()=>[p(re,{class:S(["w-100 h-100 rounded-0 bg-grey-lighten-3",e.cardClass])},{default:d(()=>[p(ae,{class:"pa-0",ref_key:"dialogTitleEl",ref:c},{default:d(()=>[v(r.$slots,"header",{},()=>[x("div",Me,[x("div",De,[v(r.$slots,"header-icon",{},()=>[x("img",{src:e.logo,class:"ml-1",alt:"logo",width:"24",height:"24"},null,8,Ee)],!0),x("span",Ce,E(e.title),1)]),p($,{size:"24px",class:"mr-2",variant:"plain",onClick:se(m,["stop"])},{default:d(()=>[p(oe,{size:"24px",icon:"cha"})]),_:1},8,["onClick"])])],!0)]),_:3},512),p(ne,{class:S([e.cardTextClass,"py-0"])},{default:d(()=>[v(r.$slots,"default",{},void 0,!0)]),_:3},8,["class"]),v(r.$slots,"actions",{},()=>[p(le,{class:"mx-1 mt-0 mb-1 pa-0 d-flex justify-end bg-prominent"},{default:d(()=>[(f(!0),_(L,null,ie(e.footerBtnList,(n,t)=>(f(),D(ye,{key:t+n.name,onClick:n.fun,isAction:"",primary:n.primary,disabled:n.disabled?n.disabled():!1,class:"mr-3"},{default:d(()=>[n.labelProps?(f(),D(_e,X({key:0},n.labelProps,{noTextCaption:""}),{default:d(()=>[k(E(n.name),1)]),_:2},1040)):(f(),_("span",Se,E(n.name),1))]),_:2},1032,["onClick","primary","disabled"]))),128))]),_:1})],!0)]),_:3},8,["class"])]),_:3},8,["model-value"]))}});const Xe=B(we,[["__scopeId","data-v-3d46d8a1"],["__file","D:/web/MxCADOnline/Sample/Edit/MxCADAppVuetify3/src/components/MxDialog/index.vue"]]);export{Xe as M,_e as a,ye as b,ke as u};
